# 用户管理

## 一、基本介绍

Linux系统是一个多用户多任务的操作系统，任何一个要使用系统资源的用户，都必须首先向系统管理员申请一个账号，然后以这个账号的身份进入系统

用户的账号一方面可以帮助系统管理员对使用系统的用户进行跟踪，并控制他们对系统资源的访问；另一方面也可以帮助用户组织文件，并为用户提供安全性保护。

每个用户账号都拥有一个唯一的用户名和各自的口令。

用户在登录时键入正确的用户名和口令后，就能够进入系统和自己的主目录。



## 二、添加用户

1、基本语法

```
useradd 用户名
```



2、应用案例

案例1：添加一个用户milan,默认该用户的家目录在/home/milan

```
useradd milan       创建用户milan
cd /home            进入/home目录下
ls -l               查看/home目录下是否有用户milan的家目录
```



3、细节说明

当创建用户成功后，会自动的创建和用户同名的家目录

也可以通过useradd -d 指定目录 新的用户名，给新创建的用户指定家目录

举例说明：在/home/test目录下新建用户king

```
useradd -d /home/test king
```



## 三、指定/修改密码

1、基本语法

passwd  用户名



2、应用案例

给milan指定密码

举例:

```
passwd milan   然后输入两遍密码即可，虽然会提示密码过于简单，但依然可以设置成功
pwd            显示当前用户所在的目录
```



## 四、删除用户

1、基本语法

userdel  用户名



2、应用案例

删除用户milan,但是要保留该用户的家目录

```
userdel milan
```

删除用户milan,同时删除该用户的家目录

```
userdel -r milan
```



3、细节说明

是否保留家目录的讨论？ 一般情况下，我们建议保留



## 五、查询用户信息指令

1、基本语法

id 用户名

![image-20220227000054419](day04.assets/image-20220227000054419.png)



2、应用实例

案例：去查询用户root 信息

![image-20220227000141685](day04.assets/image-20220227000141685.png)



3、细节说明

当用户不存在时，返回无此用户

![image-20220227000222679](day04.assets/image-20220227000222679.png)



## 六、切换用户

1、介绍

在操作Linux时，如果当前用户的权限不够，可以通过su - 用户名 指令，切换到高权限用户，比如 root



2、基本语法

su - 切换用户名



3、应用实例

创建一个用户jack，指定密码，然后切换到 jack

```
useradd jack    创建用户
passwd jack     设置密码
su - jack       切换到jack用户，如果是从root用户切换，则无需密码，高权限用户切换到低权限用户无需密码
```



4、细节说明

从权限高的用户切换到权限低的用户，不需要输入密码，反之需要

当需要返回原来的用户时，使用 exit/logout 指令



## 七、查看当前用户/登录用户

```
whoami / who am i
```



## 八、用户组

1、介绍

用户组类似于角色，系统可以对有共性 / 权限的多个用户进行统一的管理



2、新增组

groupadd 组名



3、删除组

groupdel 组名



4、案例演示

案例：增加用户时直接加上组

指令：useradd -g 用户组  用户名

```
groupadd wudang            新建组名武当
useradd -g wudang zwj      新建用户张无忌，分组在武当
```



5、修改用户的组

指令：usermod -g 用户组 用户名

案例演示：

创建一个组  mojioa

把 zwj 放入到 mojiao

```
usermod -g mojiao zwj
```



## 九、用户和组相关文件

1、/etc/passwd 文件

用户（user）的配置文件，记录用户的各种信息

每行的含义：用户名：口令：用户标识符：组标识符：注释行描述：主目录：登录shell



2、/etc/shadow 文件

口令的配置文件

每行的含义：登录名：加密口令：最后一次修改时间：最小时间间隔：最大时间间隔：警告时间：不活动时间：失效时间：标志



3、/etc/group 文件

组（group）的配置文件，记录Linux包含的组的信息

每行含义：组名：口令：组标识号：组内用户列表